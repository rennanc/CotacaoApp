@model CotacaoApp.Models.Apolice
@using CotacaoApp.Models

@{
    ViewBag.Title = "Nova Apólice";
    Usuario usuario = (Usuario)Session["UsuarioLogado"];
}

<h2>Criar Apólice</h2>

@using (Html.BeginForm("SendForm", "Apolice", FormMethod.Post))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal" id="Apolice">
        <h4>Formulario</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

        @if (Model.Proposta != null)
        {
            @Html.Partial("_Proposta", (Proposta)Model.Proposta)
            @Html.HiddenFor(model => model.CodigoProposta, new { id = "Comissao.CodigoProposta", Value = @Model.Proposta.Id })

        }

        

        <h1>Apolice</h1>
        <div class="form-group ">
            @Html.Label("Seguradora:*", htmlAttributes: new { @class = "control-label col-md-2" })
            <select name="CodigoSeguradora" class="form-control col-md-10" style="margin-left:15px">
                <option>Escolha uma Seguradora</option>
                @if (Model.Seguradoras != null)
                {
                    foreach (var seguradora in Model.Seguradoras)
                    {
                        <option value="@seguradora.Id">@seguradora.NomeSeguradora</option>
                    }
                }
            </select>
        </div>

        <div class="form-group">
            @Html.Label("Valor do Contrato:*", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="input-group" style="padding-left:15px">
                <div class="input-group-addon">$</div>
                <input type="text" id="ValorContrato" style="width: 315px;" name="ValorContrato" class="form-control numeric" placeholder="0.00">
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Status, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Status, new { htmlAttributes = new { @class = "form-control" } })
                @*@Html.ValidationMessageFor(model => model.Status, "", new { @class = "text-danger" })*@
            </div>
        </div>
        

        <h2>Comissão</h2>
        @Html.HiddenFor(model => model.Comissao.CodigoUsuario, new { id = "Comissao.CodigoUsuario", Value = @usuario.Id })

        <div class="form-group">
            @Html.LabelFor(model => model.Comissao.ValorPremioLiquido, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="input-group" style="padding-left:15px">
                <div class="input-group-addon">$</div>
                <input type="text" id="Comissao.ValorPremioLiquido" style="width: 315px;" name="Comissao.ValorPremioLiquido" class="form-control numeric" placeholder="0.00">
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Comissao.ValorPercentualLiquido, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="input-group" style="padding-left:15px">
                <div class="input-group-addon">%</div>
                <input type="text" id="Comissao.ValorPercentualLiquido" style="width: 315px;" name="Comissao.ValorPercentualLiquido" class="form-control numeric" placeholder="0.00">
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Comissao.ValorComissaoLiquida, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="input-group" style="padding-left:15px">
                <div class="input-group-addon">$</div>
                <input type="text" id="Comissao.ValorComissaoLiquida" style="width: 315px;" name="Comissao.ValorComissaoLiquida" class="form-control numeric" placeholder="0.00">
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Comissao.ValorPercentualCiss, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="input-group" style="padding-left:15px">
                <div class="input-group-addon">%</div>
                <input type="text" id="Comissao.ValorPercentualCiss" style="width: 315px;" name="Comissao.ValorPercentualCiss" class="form-control numeric" placeholder="0.00">
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Comissao.ValorPercentualCir, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="input-group" style="padding-left:15px">
                <div class="input-group-addon">%</div>
                <input type="text" id="Comissao.ValorPercentualCir" style="width: 315px;" name="Comissao.ValorPercentualCir" class="form-control numeric" placeholder="0.00">
            </div>
        </div>
        <input type="hidden" id="formularioApoliceHtml" name="formularioApoliceHtml" />
        <div><input type="submit" value="Emitir Apolice Para o Cliente" class="form-control btn-success" /></div>

    </div>
}

<div>
    @Html.ActionLink("Voltar para a Lista", "Index")
</div>

<script type="text/javascript">
    $(".numeric").inputmask("decimal", {
        radixPoint: ",",
        digits: 2
    });

    $(document).ready(function () {
        $("#formularioApoliceHtml").val($("#Apolice").html());
    });
    
</script>
